<%= simple_form_for @school_calendar, html: { class: "smart-form" } do |f| %>
  <%= f.error_notification %>

  <fieldset>
    <div class="row">
      <div class="col col-sm-4">
        <%= f.input :year, input_html: { max_length: 4 } %>
      </div>

      <div class="col col-sm-4">
        <%= f.input :number_of_classes %>
      </div>
    </div>
  </fieldset>

  <fieldset id="school_calendar_steps">
    <legend>Etapas</legend>

    <div>
      <span class="help-inline">
        <%= f.object.errors[:steps].join "<br />" %>
      </span>
    </div>

    <table class="table table-striped table-bordered table-condensed records">
      <thead>
        <tr>
          <th><%= SchoolCalendarStep.human_attribute_name :start_at %></th>
          <th><%= SchoolCalendarStep.human_attribute_name :end_at %></th>
          <th><%= SchoolCalendarStep.human_attribute_name :start_date_for_posting %></th>
          <th><%= SchoolCalendarStep.human_attribute_name :end_date_for_posting %></th>
          <th></th>
        </tr>
      </thead>

      <tbody id="school-calendar-steps">
        <%= f.simple_fields_for :steps do |step| %>
          <%= render 'step_fields', f: step %>
        <% end %>
      </tbody>
      <tfoot class="links">
        <tr>
          <td colspan="5">
            <%= link_to_add_association t('.add_step'), f, :steps,
              class: 'btn btn-success btn-sm',
              :"data-association-insertion-method" => "append",
              :"data-association-insertion-node" => "#school-calendar-steps" %>
          </td>
        </tr>
      </tfoot>
    </table>
  </fieldset>

  <footer>
    <%= link_to "Voltar", school_calendars_path, class: "btn btn-default" %>

    <% if @school_calendar.persisted? %>
      <%= link_to 'HistÃ³rico', history_school_calendar_path(@school_calendar), class: 'btn btn-info' %>
    <% end %>

    <%= f.submit 'Salvar', class: 'btn btn-primary' %>

  </footer>
<% end %>
