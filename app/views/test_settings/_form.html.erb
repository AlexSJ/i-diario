<%= simple_form_for @test_setting, html: { class: "smart-form" } do |f| %>
  <%= f.error_notification %>

  <fieldset>
    <div class="row">
      <div class="col col-sm-3">
        <%= f.input :year, input_html: { max_length: 4 } %>
      </div>

      <div class="col col-sm-3">
        <%= f.input :maximum_score %>
      </div>

      <div class="col col-sm-3">
        <%= f.input :number_of_decimal_places %>
      </div>

      <div class="col col-sm-3">
        <%= f.input :fix_tests %>
      </div>
    </div>
  </fieldset>

  <fieldset id="item_setting_tests">
    <legend>Avaliações</legend>

    <div>
      <span class="help-inline error">
        <% f.object.errors[:tests].each do |error| %>
          <%= error %><br/>
        <% end %>
      </span>
    </div>

    <table class="table table-striped table-bordered table-condensed records">
      <thead>
        <tr>
          <th><%= TestSettingTest.human_attribute_name :description %></th>
          <th><%= TestSettingTest.human_attribute_name :weight %></th>
          <th><%= TestSettingTest.human_attribute_name :test_type %></th>
          <th></th>
        </tr>
      </thead>

      <tbody id="test-settings-tests">
        <%= f.association :tests do |p| %>
          <%= render 'test_fields', f: p %>
        <% end %>
      </tbody>
      <tfoot class="links">
        <tr>
          <td colspan="4">
            <%= link_to_add_association t('.add_test'), f, :tests,
              class: 'btn btn-success btn-sm',
              :"data-association-insertion-method" => "append",
              :"data-association-insertion-node" => "#test-settings-tests" %>
          </td>
        </tr>
      </tfoot>
    </table>
  </fieldset>

  <footer>
    <%= link_to "Voltar", test_settings_path, class: "btn btn-default" %>

    <% if @test_setting.persisted? %>
      <%= link_to 'Histórico', history_test_setting_path(@test_setting), class: 'btn btn-info' %>
    <% end %>

    <%= f.submit 'Salvar', class: 'btn btn-primary' %>
  </footer>
<% end %>
