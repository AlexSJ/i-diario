<% content_for :js do %>
  <%= javascript_include_tag 'views/contents/form' %>
<% end %>

<%= simple_form_for @content, html: { class: "smart-form" } do |f| %>

  <%= f.error_notification %>

  <fieldset>
    <div class="row">
      <div class="col col-sm-4">
        <%= f.association :unity, as: :select2, elements: @unities, readonly: !current_user.admin? %>
      </div>

      <div class="col col-sm-4">
        <%= f.association :classroom, as: :select2, elements: @classrooms %>
      </div>

      <div class="col col-sm-4">
        <%= f.association :discipline, as: :select2, elements: @disciplines, required: true%>
      </div>
    </div>

    <div class="row">
      <div class="col col-sm-4">
        <div class="control-group <%= 'error' if @content.errors[:content_date].any? %>">
          <%= f.label :content_date %>
          <div class="icon-addon">
            <label for="content_date" class="fa fa-calendar"></label>
            <%= f.text_field :content_date, class: 'form-control date datepicker col col-sm-4' %>
          </div>

          <% if @content.errors[:content_date].any? %>
            <span class="help-inline"><%= @content.errors[:content_date].first %></span>
          <% end %>
        </div>
      </div>

      <div class="col col-sm-4">
        <%= f.input :classes, as: :select2, elements: number_of_classes_elements(@number_of_classes), required: true, multiple: true,
              input_html: { value: f.object.classes.join(','), data: { without_json_parser: true } } %>
      </div>
    </div>

    <div class="row textarea">
      <div class="col col-sm-12">
        <%= f.input :theme, input_html: { class: 'col col-sm-12'} %>
      </div>
    </div>

    <div class="row textarea">
      <div class="col col-sm-12">
        <%= f.input :description, input_html: { class: 'col col-sm-12' } %>
      </div>
    </div>

    <div class="row textarea">
      <div class="col col-sm-12">
        <%= f.input :goals, input_html: { class: 'col col-sm-12' } %>
      </div>
    </div>

    <div class="row textarea">
      <div class="col col-sm-12">
        <%= f.input :means, input_html: { class: 'col col-sm-12' } %>
      </div>
    </div>

    <div class="row textarea">
      <div class="col col-sm-12">
        <%= f.input :evaluation, input_html: { class: 'col col-sm-12' } %>
      </div>
    </div>

    <div class="row textarea">
      <div class="col col-sm-12">
        <%= f.input :bibliography, input_html: { class: 'col col-sm-12' } %>
      </div>
    </div>
  </fieldset>

  <% if @content.persisted? %>
    <fieldset>
      <legend><%= t('.additional_information') %></legend>

      <div class="row">
        <div class="col col-sm-12">
          <%= f.input :opinion, input_html: { class: 'col col-sm-12' } %>
        </div>
      </div>
    </fieldset>
  <% end %>

  <footer>
    <%= link_to t('views.form.back'), contents_path, class: 'btn btn-default' %>
    <%= link_to t('views.form.history'), history_content_path(@content), class: 'btn btn-info' if @content.persisted? %>

    <%= f.submit t('views.form.save'), class: 'btn btn-primary' %>
  </footer>
<% end %>
